import React, { useEffect, useRef } from "react";
import Image from "next/image";
import { useRouter } from "next/router";
import { gsap } from "gsap";
import classNames from "classnames";
import { useTranslation } from "react-i18next";
import Link from "next/link";

import styles from "./style.module.scss";

const NavMenuExpaned: React.FC<{
  isOpen: boolean;
  onCloseNavExpanded: () => void;
}> = ({ isOpen, onCloseNavExpanded }) => {
  const { t } = useTranslation("common");
  const router = useRouter();

  const menuContainerRef = useRef<HTMLDivElement | null>(null);
  const menuRef = useRef<HTMLDivElement | null>(null);
  const menuInfoRef = useRef<HTMLDivElement | null>(null);

  useEffect(() => {
    const tl = gsap.timeline({
      defaults: {
        stagger: 0,
        delay: 0,
      },
      onStart: () => {
        if (menuContainerRef?.current) {
          if (isOpen) {
            menuContainerRef?.current.classList.add(styles.navMenu__opened);
          }
        }
      },
      onComplete: () => {
        if (menuContainerRef?.current) {
          if (!isOpen) {
            menuContainerRef?.current.classList.remove(styles.navMenu__opened);
          }
        }
      },
    });

    if (isOpen) {
      tl.to(menuRef.current, {
        y: 0,
        duration: 0.5,
        ease: "Power1.easeInOut",
      }).to(
        menuInfoRef.current,
        {
          y: 0,
          duration: 0.5,
          ease: "Power1.easeInOut",
        },
        "<"
      );
    } else {
      tl.to(menuRef.current, {
        y: "-100%",
        duration: 0.5,
        ease: "Power1.easeInOut",
      }).to(
        menuInfoRef.current,
        {
          y: "100%",
          duration: 0.5,
          ease: "Power1.easeInOut",
        },
        "<"
      );
    }
  }, [isOpen]);

  const onClickMenuItem = (path: string) => {
    router.push(path);
    setTimeout(() => {
      onCloseNavExpanded();
    }, 1000);
  };

  return (
    <div className={classNames(styles.navMenu)} ref={menuContainerRef}>
      <div className={styles.navMenu__menu} ref={menuRef}>
        <ul className={styles.navMenu__menu_list}>
          <li
            className={styles.navMenu__menu_item}
            onClick={() => onClickMenuItem("/")}
          >
            {t("nav_home")}
          </li>
          <li
            className={styles.navMenu__menu_item}
            onClick={() => onClickMenuItem("/events")}
          >
            {t("nav_events")}
          </li>
          <li
            className={styles.navMenu__menu_item}
            onClick={() => onClickMenuItem("/teachers")}
          >
            {t("nav_private_lessons")}
          </li>
          <li
            className={styles.navMenu__menu_item}
            onClick={() => onClickMenuItem("/blogs/the-grand-social")}
          >
            {t("nav_blog")}
          </li>
        </ul>
      </div>
      <div className={styles.navMenu__info} ref={menuInfoRef}>
        <Image
          src={"/nlogo.png"}
          alt="Academias de baile"
          width={100}
          height={100}
          style={{ objectFit: "contain" }}
        />
        <div>
          {t("nav_text")}
          <div className="social-media">
            <Link
              rel="nofollow"
              href="https://www.instagram.com/harlen.giraldo/"
              aria-label="instagram account"
              target="_blank"
            >
              <svg
                fill="white"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 80 80"
                width="80px"
                height="80px"
              >
                <path d="M 20 10 C 14.488666 10 10 14.488666 10 20 L 10 60 C 10 65.511334 14.488666 70 20 70 L 60 70 C 65.511334 70 70 65.511334 70 60 L 70 20 C 70 14.488666 65.511334 10 60 10 L 20 10 z M 21 12 L 23 12 A 1 1 0 0 0 24 13 A 1 1 0 0 0 25 12 L 60 12 C 64.430666 12 68 15.569334 68 20 L 68 27 A 1 1 0 0 0 67 28 A 1 1 0 0 0 68 29 L 68 60 C 68 64.430666 64.430666 68 60 68 L 20 68 C 15.569334 68 12 64.430666 12 60 L 12 29 A 1 1 0 0 0 13 28 A 1 1 0 0 0 12 27 L 12 20 C 12 15.907515 15.047443 12.557073 19.003906 12.068359 A 1 1 0 0 0 20 13 A 1 1 0 0 0 21 12 z M 16 15 A 1 1 0 0 0 15 16 A 1 1 0 0 0 16 17 A 1 1 0 0 0 17 16 A 1 1 0 0 0 16 15 z M 20 15 A 1 1 0 0 0 19 16 A 1 1 0 0 0 20 17 A 1 1 0 0 0 21 16 A 1 1 0 0 0 20 15 z M 24 15 A 1 1 0 0 0 23 16 A 1 1 0 0 0 24 17 A 1 1 0 0 0 25 16 A 1 1 0 0 0 24 15 z M 57 15 C 55.906937 15 55 15.906937 55 17 L 55 22 C 55 23.093063 55.906937 24 57 24 L 63 24 C 64.093063 24 65 23.093063 65 22 L 65 17 C 65 15.906937 64.093063 15 63 15 L 57 15 z M 57 17 L 63 17 L 63 22 L 57 22 L 57 17 z M 16 19 A 1 1 0 0 0 15 20 A 1 1 0 0 0 16 21 A 1 1 0 0 0 17 20 A 1 1 0 0 0 16 19 z M 20 19 A 1 1 0 0 0 19 20 A 1 1 0 0 0 20 21 A 1 1 0 0 0 21 20 A 1 1 0 0 0 20 19 z M 24 19 A 1 1 0 0 0 23 20 A 1 1 0 0 0 24 21 A 1 1 0 0 0 25 20 A 1 1 0 0 0 24 19 z M 16 23 A 1 1 0 0 0 15 24 A 1 1 0 0 0 16 25 A 1 1 0 0 0 17 24 A 1 1 0 0 0 16 23 z M 20 23 A 1 1 0 0 0 19 24 A 1 1 0 0 0 20 25 A 1 1 0 0 0 21 24 A 1 1 0 0 0 20 23 z M 24 23 A 1 1 0 0 0 23 24 A 1 1 0 0 0 24 25 A 1 1 0 0 0 25 24 A 1 1 0 0 0 24 23 z M 40 23 C 30.623004 23 23 30.623004 23 40 C 23 49.376996 30.623004 57 40 57 C 49.376996 57 57 49.376996 57 40 C 57 30.623004 49.376996 23 40 23 z M 40 25 C 48.296116 25 55 31.703884 55 40 C 55 48.296116 48.296116 55 40 55 C 31.703884 55 25 48.296116 25 40 C 25 31.703884 31.703884 25 40 25 z M 16 27 A 1 1 0 0 0 15 28 A 1 1 0 0 0 16 29 A 1 1 0 0 0 17 28 A 1 1 0 0 0 16 27 z M 20 27 A 1 1 0 0 0 19 28 A 1 1 0 0 0 20 29 A 1 1 0 0 0 21 28 A 1 1 0 0 0 20 27 z M 24 27 A 1 1 0 0 0 23 28 A 1 1 0 0 0 24 29 A 1 1 0 0 0 25 28 A 1 1 0 0 0 24 27 z M 56 27 A 1 1 0 0 0 55 28 A 1 1 0 0 0 56 29 A 1 1 0 0 0 57 28 A 1 1 0 0 0 56 27 z M 60 27 A 1 1 0 0 0 59 28 A 1 1 0 0 0 60 29 A 1 1 0 0 0 61 28 A 1 1 0 0 0 60 27 z M 64 27 A 1 1 0 0 0 63 28 A 1 1 0 0 0 64 29 A 1 1 0 0 0 65 28 A 1 1 0 0 0 64 27 z M 40 28 A 1 1 0 0 0 39 29 A 1 1 0 0 0 40 30 A 1 1 0 0 0 41 29 A 1 1 0 0 0 40 28 z M 44.210938 28.835938 A 1 1 0 0 0 43.210938 29.835938 A 1 1 0 0 0 44.210938 30.835938 A 1 1 0 0 0 45.210938 29.835938 A 1 1 0 0 0 44.210938 28.835938 z M 35.791016 28.837891 A 1 1 0 0 0 34.791016 29.837891 A 1 1 0 0 0 35.791016 30.837891 A 1 1 0 0 0 36.791016 29.837891 A 1 1 0 0 0 35.791016 28.837891 z M 32.222656 31.222656 A 1 1 0 0 0 31.222656 32.222656 A 1 1 0 0 0 32.222656 33.222656 A 1 1 0 0 0 33.222656 32.222656 A 1 1 0 0 0 32.222656 31.222656 z M 47.777344 31.222656 A 1 1 0 0 0 46.777344 32.222656 A 1 1 0 0 0 47.777344 33.222656 A 1 1 0 0 0 48.777344 32.222656 A 1 1 0 0 0 47.777344 31.222656 z M 50.164062 34.789062 A 1 1 0 0 0 49.164062 35.789062 A 1 1 0 0 0 50.164062 36.789062 A 1 1 0 0 0 51.164062 35.789062 A 1 1 0 0 0 50.164062 34.789062 z M 29.837891 34.791016 A 1 1 0 0 0 28.837891 35.791016 A 1 1 0 0 0 29.837891 36.791016 A 1 1 0 0 0 30.837891 35.791016 A 1 1 0 0 0 29.837891 34.791016 z M 29 39 A 1 1 0 0 0 28 40 A 1 1 0 0 0 29 41 A 1 1 0 0 0 30 40 A 1 1 0 0 0 29 39 z M 51 39 A 1 1 0 0 0 50 40 A 1 1 0 0 0 51 41 A 1 1 0 0 0 52 40 A 1 1 0 0 0 51 39 z M 50.164062 43.208984 A 1 1 0 0 0 49.164062 44.208984 A 1 1 0 0 0 50.164062 45.208984 A 1 1 0 0 0 51.164062 44.208984 A 1 1 0 0 0 50.164062 43.208984 z M 29.839844 43.210938 A 1 1 0 0 0 28.839844 44.210938 A 1 1 0 0 0 29.839844 45.210938 A 1 1 0 0 0 30.839844 44.210938 A 1 1 0 0 0 29.839844 43.210938 z M 32.220703 46.777344 A 1 1 0 0 0 31.220703 47.777344 A 1 1 0 0 0 32.220703 48.777344 A 1 1 0 0 0 33.220703 47.777344 A 1 1 0 0 0 32.220703 46.777344 z M 47.777344 46.777344 A 1 1 0 0 0 46.777344 47.777344 A 1 1 0 0 0 47.777344 48.777344 A 1 1 0 0 0 48.777344 47.777344 A 1 1 0 0 0 47.777344 46.777344 z M 35.792969 49.162109 A 1 1 0 0 0 34.792969 50.162109 A 1 1 0 0 0 35.792969 51.162109 A 1 1 0 0 0 36.792969 50.162109 A 1 1 0 0 0 35.792969 49.162109 z M 44.212891 49.162109 A 1 1 0 0 0 43.212891 50.162109 A 1 1 0 0 0 44.212891 51.162109 A 1 1 0 0 0 45.212891 50.162109 A 1 1 0 0 0 44.212891 49.162109 z M 40 50 A 1 1 0 0 0 39 51 A 1 1 0 0 0 40 52 A 1 1 0 0 0 41 51 A 1 1 0 0 0 40 50 z" />
              </svg>
            </Link>
            <Link
              rel="nofollow"
              href="https://www.linkedin.com/in/harlen-giraldo-ortega-852179116/"
              aria-label="Linkedin account"
              target="_blank"
            >
              <svg
                fill="white"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 80 80"
                width="80px"
                height="80px"
              >
                <path d="M 15 9 C 12.25 9 10 11.25 10 14 L 10 64 C 10 66.75 12.25 69 15 69 L 65 69 C 67.75 69 70 66.75 70 64 L 70 14 C 70 11.25 67.75 9 65 9 Z M 15 11 L 65 11 C 66.667969 11 68 12.332031 68 14 L 68 64 C 68 65.667969 66.667969 67 65 67 L 15 67 C 13.332031 67 12 65.667969 12 64 L 12 14 C 12 12.332031 13.332031 11 15 11 Z M 23.902344 16.984375 C 20.601563 16.984375 17.90625 19.679688 17.90625 22.972656 C 17.90625 26.269531 20.601563 28.964844 23.902344 28.964844 C 27.195313 28.964844 29.886719 26.269531 29.886719 22.972656 C 29.886719 19.679688 27.195313 16.984375 23.902344 16.984375 Z M 36 17 C 35.449219 17 35 17.449219 35 18 C 35 18.550781 35.449219 19 36 19 C 36.550781 19 37 18.550781 37 18 C 37 17.449219 36.550781 17 36 17 Z M 40 17 C 39.449219 17 39 17.449219 39 18 C 39 18.550781 39.449219 19 40 19 C 40.550781 19 41 18.550781 41 18 C 41 17.449219 40.550781 17 40 17 Z M 44 17 C 43.449219 17 43 17.449219 43 18 C 43 18.550781 43.449219 19 44 19 C 44.550781 19 45 18.550781 45 18 C 45 17.449219 44.550781 17 44 17 Z M 48 17 C 47.449219 17 47 17.449219 47 18 C 47 18.550781 47.449219 19 48 19 C 48.550781 19 49 18.550781 49 18 C 49 17.449219 48.550781 17 48 17 Z M 52 17 C 51.449219 17 51 17.449219 51 18 C 51 18.550781 51.449219 19 52 19 C 52.550781 19 53 18.550781 53 18 C 53 17.449219 52.550781 17 52 17 Z M 56 17 C 55.449219 17 55 17.449219 55 18 C 55 18.550781 55.449219 19 56 19 C 56.550781 19 57 18.550781 57 18 C 57 17.449219 56.550781 17 56 17 Z M 60 17 C 59.449219 17 59 17.449219 59 18 C 59 18.550781 59.449219 19 60 19 C 60.550781 19 61 18.550781 61 18 C 61 17.449219 60.550781 17 60 17 Z M 23.902344 18.984375 C 26.109375 18.984375 27.886719 20.761719 27.886719 22.972656 C 27.886719 25.1875 26.109375 26.964844 23.902344 26.964844 C 21.679688 26.964844 19.90625 25.1875 19.90625 22.972656 C 19.90625 20.761719 21.679688 18.984375 23.902344 18.984375 Z M 50.101563 30.058594 C 46.9375 30.058594 44.507813 31.289063 42.84375 32.867188 L 42.84375 30.746094 L 32.597656 30.746094 L 32.597656 60.421875 L 43.191406 60.421875 L 43.191406 45.734375 C 43.191406 43.992188 43.390625 42.359375 43.96875 41.308594 C 44.550781 40.253906 45.375 39.625 47.351563 39.625 C 49.246094 39.625 49.851563 40.289063 50.3125 41.453125 C 50.773438 42.621094 50.824219 44.363281 50.824219 45.960938 L 50.824219 60.421875 L 60.421875 60.421875 L 60.421875 58.421875 L 61.421875 59.421875 L 61.421875 44.242188 C 61.421875 40.441406 61.046875 36.972656 59.375 34.324219 C 57.703125 31.671875 54.675781 30.058594 50.101563 30.058594 Z M 18.59375 30.746094 L 18.59375 60.421875 L 29.203125 60.421875 L 29.203125 30.746094 Z M 50.101563 32.058594 C 54.238281 32.058594 56.371094 33.308594 57.683594 35.390625 C 58.996094 37.46875 59.421875 40.585938 59.421875 44.242188 L 59.421875 58.421875 L 52.824219 58.421875 L 52.824219 45.960938 C 52.824219 44.351563 52.84375 42.417969 52.171875 40.71875 C 51.503906 39.023438 49.871094 37.625 47.351563 37.625 C 44.851563 37.625 43.097656 38.742188 42.21875 40.34375 C 41.339844 41.941406 41.191406 43.863281 41.191406 45.734375 L 41.191406 58.421875 L 34.597656 58.421875 L 34.597656 32.746094 L 40.84375 32.746094 L 40.84375 36.527344 L 42.566406 36.527344 L 42.847656 35.996094 C 43.820313 34.15625 46.28125 32.058594 50.101563 32.058594 Z M 20.59375 32.746094 L 27.203125 32.746094 L 27.203125 58.421875 L 20.59375 58.421875 Z" />
              </svg>
            </Link>
          </div>
        </div>
      </div>
    </div>
  );
};

export default NavMenuExpaned;
